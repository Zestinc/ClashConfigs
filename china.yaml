port: 7890
socks-port: 7891
redir-port: 7892
tproxy-port: 7893
allow-lan: false
bind-address: '*'
mode: rule
log-level: info
external-controller: '127.0.0.1:9090'
sniffer:
    enable: true
    sniffing: [tls, http]
dns:
    enable: true
    ipv6: false
    default-nameserver: [223.5.5.5]
    fake-ip-range: 198.18.0.1/16
    fake-ip-filter: ['*.lan', '*.linksys.com', +.pool.ntp.org, localhost.ptlogin2.qq.com]
    nameserver: ['https://dns.alidns.com/dns-query', 'https://doh.pub/dns-query']
    fallback: ['https://doh.pub/dns-query', 'https://dns.google/dns-query']
    fallback-filter: { geoip: true, ipcidr: [240.0.0.0/4, 0.0.0.0/32] }
proxies:
proxy-providers:
  EdNovas:
    type: http
    path: ./profiles/provider_EdNovas.yml
    url: https://cdn.ednovas.tech/api/v1/client/subscribe?token=edb1c56c745a3790b1506e2e18b3f833&flag=clash
    interval: 3600
    health-check:
      enable: true  # æ˜¯å¦è‡ªåŠ¨è¿›è¡Œlatency-test
      url: http://www.gstatic.com/generate_204
      interval: 60
proxy-groups:
    # Functions
    # - { name: 'ğŸ”° æ‰‹åŠ¨é€‰æ‹©', type: select, proxies: ['ğŸ‡¨ğŸ‡³ China'] } 
    # Rigions
    - {name: 'ğŸ‡¨ğŸ‡³ China', type: url-test, use: [EdNovas], filter: "ğŸ‡¨ğŸ‡³|æ—¥å¿—è®°å½•", icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/China.png, interval: 30, lazy: true, tolerance: 200, include-all: true, url: http://connectivitycheck.platform.hicloud.com/generate_204}
    - {name: 'ğŸ‡ºğŸ‡¸ United States', type: url-test, use: [EdNovas], filter: "ğŸ‡ºğŸ‡²|US|(?i)States|America", icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/United_States.png, interval: 30, lazy: true, tolerance: 100, include-all: true, url: http://www.gstatic.com/generate_204 }

    - { name: 'ğŸ Apple', type: select, proxies: [DIRECT]}
    - { name: 'â“‚ Microsoft', type: select, proxies: [DIRECT]}

rule-providers:
    SteamCN: { type: http, behavior: classical, path: ./providers/rule/Games/SteamCN.yaml, url: http://154.17.13.205:32580/ACL4SSR/Clash/Providers/Ruleset/SteamCN.yaml, interval: 21600 }
    ChinaDomain: { type: http, behavior: classical, path: ./providers/rule/ChinaDomain.yaml, url: http://154.17.13.205:32580/ACL4SSR/Clash/Providers/ChinaDomain.yaml, interval: 21600 }
    DirectChinaDomain: { type: http, behavior: classical, path: ./providers/rule/DirectChinaDomain.yaml, url: https://raw.githubusercontent.com/Zestinc/ClashConfigs/main/DirectChinaDomain.yaml, interval: 60 }
    USOnlyDomain: { type: http, behavior: classical, path: ./providers/rule/USOnlyDomain.yaml, url: https://raw.githubusercontent.com/Zestinc/ClashConfigs/main/USOnlyDomain.yaml, interval: 60 }
    ChinaIp: { type: http, behavior: ipcidr, path: ./providers/rule/ChinaIp.yaml, url: http://154.17.13.205:32580/ACL4SSR/Clash/Providers/ChinaIp.yaml, interval: 21600 }
    PersonalChinaDomain: { type: http, behavior: classical, path: ./providers/rule/PersonalChinaDomain.yaml, url: https://raw.githubusercontent.com/Zestinc/ClashConfigs/main/PersonalChinaDomain.yaml, interval: 120 }

    Apple: { type: http, behavior: classical, path: ./providers/rule/Apple.yaml, url: http://154.17.13.205:32580/ACL4SSR/Clash/Providers/Ruleset/Apple.yaml, interval: 21600 }
    Microsoft: { type: http, behavior: classical, path: ./providers/rule/Microsoft.yaml, url: http://154.17.13.205:32580/ACL4SSR/Clash/Providers/Ruleset/Microsoft.yaml, interval: 21600 }
rules:
    - 'IP-CIDR,192.168.0.0/16,DIRECT,no-resolve'
    - 'IP-CIDR,10.0.0.0/8,DIRECT,no-resolve'
    - 'IP-CIDR,172.16.0.0/12,DIRECT,no-resolve'
    - 'IP-CIDR,127.0.0.0/8,DIRECT,no-resolve'
    - 'IP-CIDR,100.64.0.0/10,DIRECT,no-resolve'
    - 'IP-CIDR6,::1/128,DIRECT,no-resolve'
    - 'IP-CIDR6,fc00::/7,DIRECT,no-resolve'
    - 'IP-CIDR6,fe80::/10,DIRECT,no-resolve'
    - 'IP-CIDR6,fd00::/8,DIRECT,no-resolve'
    - 'DOMAIN-SUFFIX,cm.steampowered.com,DIRECT'
    - 'DOMAIN-SUFFIX,steamserver.net,DIRECT'
    - 'DOMAIN,portal.36d.uk,DIRECT'
    - 'DOMAIN,user.36d.biz,DIRECT'
    - 'DOMAIN,user.36d.dev,DIRECT'
    
    - 'RULE-SET,DirectChinaDomain,DIRECT'
    - 'RULE-SET,Microsoft,â“‚ Microsoft'
    - 'RULE-SET,Apple,ğŸ Apple'

    - 'RULE-SET,USOnlyDomain,ğŸ‡ºğŸ‡¸ United States'
    - 'RULE-SET,PersonalChinaDomain,ğŸ‡¨ğŸ‡³ China'

    # å¤§å¤šæ•°æƒ…å†µå¯ä»¥ç›´æ¥ç›´è¿
    # - 'RULE-SET,SteamCN,ğŸ‡¨ğŸ‡³ China'
    # - 'RULE-SET,ChinaDomain,ğŸ‡¨ğŸ‡³ China'
    # - 'RULE-SET,ChinaIp,ğŸ‡¨ğŸ‡³ China'
    