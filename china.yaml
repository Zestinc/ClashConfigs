port: 7890
socks-port: 7891
redir-port: 7892
tproxy-port: 7893
allow-lan: false
bind-address: '*'
mode: rule
log-level: info
external-controller: '127.0.0.1:9090'
sniffer:
    enable: true
    sniffing: [tls, http]
dns:
    enable: true
    ipv6: false
    default-nameserver: [223.5.5.5]
    fake-ip-range: 198.18.0.1/16
    fake-ip-filter: ['*.lan', '*.linksys.com', +.pool.ntp.org, localhost.ptlogin2.qq.com]
    nameserver: ['https://dns.alidns.com/dns-query', 'https://doh.pub/dns-query']
    fallback: ['https://doh.pub/dns-query', 'https://dns.google/dns-query']
    fallback-filter: { geoip: true, ipcidr: [240.0.0.0/4, 0.0.0.0/32] }
proxies:
proxy-providers:
  EdNovas:
    type: http
    path: ./profiles/provider_EdNovas.yml
    url: https://cdn.ednovas.tech/api/v1/client/subscribe?token=edb1c56c745a3790b1506e2e18b3f833&flag=clash
    interval: 3600
    health-check:
      enable: true  # 是否自动进行latency-test
      url: http://www.gstatic.com/generate_204
      interval: 60
proxy-groups:
    # Functions
    # - { name: '🔰 手动选择', type: select, proxies: ['🇨🇳 China'] } 
    # Rigions
    - {name: '🇨🇳 China', type: url-test, use: [EdNovas], filter: "🇨🇳|日志记录", icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/China.png, interval: 30, lazy: true, tolerance: 200, include-all: true, url: http://connectivitycheck.platform.hicloud.com/generate_204}
    - {name: '🇺🇸 United States', type: url-test, use: [EdNovas], filter: "美|🇺🇲|US|(?i)States|America", icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/United_States.png, interval: 30, lazy: true, tolerance: 100, include-all: true, url: http://www.gstatic.com/generate_204 }

rule-providers:
    # SteamCN: { type: http, behavior: classical, path: ./providers/rule/Games/SteamCN.yaml, url: http://154.17.13.205:32580/ACL4SSR/Clash/Providers/Ruleset/SteamCN.yaml, interval: 21600 }
    # ChinaDomain: { type: http, behavior: classical, path: ./providers/rule/ChinaDomain.yaml, url: http://154.17.13.205:32580/ACL4SSR/Clash/Providers/ChinaDomain.yaml, interval: 21600 }
    DirectChinaDomain: { type: http, behavior: classical, path: ./providers/rule/DirectChinaDomain.yaml, url: https://raw.githubusercontent.com/Zestinc/ClashConfigs/main/DirectChinaDomain.yaml, interval: 60 }
    USOnlyDomain: { type: http, behavior: classical, path: ./providers/rule/USOnlyDomain.yaml, url: https://raw.githubusercontent.com/Zestinc/ClashConfigs/main/USOnlyDomain.yaml, interval: 60 }
    # ChinaIp: { type: http, behavior: ipcidr, path: ./providers/rule/ChinaIp.yaml, url: http://154.17.13.205:32580/ACL4SSR/Clash/Providers/ChinaIp.yaml, interval: 21600 }
    PersonalChinaDomain: { type: http, behavior: classical, path: ./providers/rule/PersonalChinaDomain.yaml, url: https://raw.githubusercontent.com/Zestinc/ClashConfigs/main/PersonalChinaDomain.yaml, interval: 120 }
rules:
    - 'IP-CIDR,192.168.0.0/16,DIRECT,no-resolve'
    - 'IP-CIDR,10.0.0.0/8,DIRECT,no-resolve'
    - 'IP-CIDR,172.16.0.0/12,DIRECT,no-resolve'
    - 'IP-CIDR,127.0.0.0/8,DIRECT,no-resolve'
    - 'IP-CIDR,100.64.0.0/10,DIRECT,no-resolve'
    - 'IP-CIDR6,::1/128,DIRECT,no-resolve'
    - 'IP-CIDR6,fc00::/7,DIRECT,no-resolve'
    - 'IP-CIDR6,fe80::/10,DIRECT,no-resolve'
    - 'IP-CIDR6,fd00::/8,DIRECT,no-resolve'
    - 'RULE-SET,DirectChinaDomain,🇺🇸 United States'
    - 'RULE-SET,USOnlyDomain,🇺🇸 United States'
    # 大多数情况可以直接直连
    # - 'RULE-SET,SteamCN,🇨🇳 China'
    # - 'RULE-SET,ChinaDomain,🇨🇳 China'
    # - 'RULE-SET,ChinaIp,🇨🇳 China'
    - 'RULE-SET,PersonalChinaDomain,🇨🇳 China'
    - 'MATCH, 🇺🇸 United States'
    